"use strict";(self.webpackChunkejercicio_one=self.webpackChunkejercicio_one||[]).push([[894],{7894:(Z,m,s)=>{s.r(m),s.d(m,{AdministracionModule:()=>P});var u=s(8583),d=s(4363),p=s(8239),b=s(1915),n=s(3018),h=s(5391),_=s(5987),C=s(5442),a=s(665);function v(r,c){if(1&r){const e=n.EpF();n.TgZ(0,"div",12),n.TgZ(1,"span",13),n.NdJ("click",function(){return n.CHM(e),n.oxw().fallo=!1}),n._uU(2,"\xd7"),n.qZA(),n._uU(3," Error, usuario inexistente o datos incorrectos. "),n.qZA()}}function y(r,c){if(1&r){const e=n.EpF();n.TgZ(0,"div",10),n.TgZ(1,"span",11),n.NdJ("click",function(){return n.CHM(e),n.oxw().fallo=!1}),n._uU(2,"\xd7"),n.qZA(),n._uU(3," Posibles errores: email sin @, campos incompletos o usuario ya registrado. "),n.qZA()}}const M=[{path:"",redirectTo:"login"},{path:"login",component:(()=>{class r{constructor(e,t,i,o){this.firestore=e,this.router=t,this.userService=i,this.shService=o,this.usuario="",this.contrasenia="",this.student=new b.b("","","",""),this.fallo=!1,this.shService.obtenerPaises().subscribe(l=>{console.log(l[1].flag),this.paisX=l[1]},l=>{console.log(l)})}login(){var e=this;return(0,p.Z)(function*(){for(var t=yield e.getUsers(),i=0,o=0;o<t.length;o++)if(e.usuario==t[o].mail&&e.contrasenia==t[o].clave){i=1,e.fallo=!1,e.succes(t[o]),e.log(t[o]);break}0==i&&(e.fallo=!0)})()}getUsers(){var e=this;return(0,p.Z)(function*(){var i,o=[];return yield e.firestore.collection("usuarios").ref.get().then(f=>f.forEach(g=>{(i=g.data()).id=g.id,o.push(i)})),o})()}succes(e){this.userService.usuario.id=e.id,this.userService.usuario.nombre=e.nombre,this.userService.usuario.clave=e.clave,this.userService.usuario.mail=e.mail;var t=this;sessionStorage.setItem("usuarioLogueado",JSON.stringify(e)),setTimeout(function(){t.router.navigateByUrl("principal/home")},1e3)}log(e){const t=this.firestore.createId();this.firestore.collection("logLogin").doc(t).set({usuario:e.id,fechaHora:new Date})}loginAdmin(){this.usuario="admin@mail.com",this.contrasenia="admin"}loginTester(){this.usuario="tester@mail.com",this.contrasenia="tester"}ngOnInit(){sessionStorage.clear()}}return r.\u0275fac=function(e){return new(e||r)(n.Y36(h.ST),n.Y36(d.F0),n.Y36(_.i),n.Y36(C.M))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-login-games"]],decls:17,vars:3,consts:[[1,"wrapper","fadeInDown"],["id","formContent"],[1,"active"],["type","email","id","login","name","loginUs","placeholder","Usuario","required","",1,"fadeIn","second",3,"ngModel","ngModelChange"],["type","password","id","password","name","loginPas","placeholder","Contrase\xf1a","required","",1,"fadeIn","third",3,"ngModel","ngModelChange"],["type","submit","value","Ingresa",1,"fadeIn","fourth",3,"click"],["type","button","value","Admin",3,"click"],["type","button","value","Tester",3,"click"],["id","formFooter"],["routerLink","/administracion/registro",1,"underlineHover"],["class","alert",4,"ngIf"],["src","","alt",""],[1,"alert"],["onclick","this.parentElement.style.display='none';",1,"closebtn",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"body"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"h2",2),n._uU(4," Inicio de sesion "),n.qZA(),n.TgZ(5,"form"),n.TgZ(6,"input",3),n.NdJ("ngModelChange",function(o){return t.usuario=o}),n.qZA(),n.TgZ(7,"input",4),n.NdJ("ngModelChange",function(o){return t.contrasenia=o}),n.qZA(),n.TgZ(8,"input",5),n.NdJ("click",function(){return t.login()}),n.qZA(),n.TgZ(9,"input",6),n.NdJ("click",function(){return t.loginAdmin()}),n.qZA(),n.TgZ(10,"input",7),n.NdJ("click",function(){return t.loginTester()}),n.qZA(),n.qZA(),n.TgZ(11,"div",8),n.TgZ(12,"a",9),n._uU(13,"Crear cuenta"),n.qZA(),n._UZ(14,"div"),n.YNc(15,v,4,0,"div",10),n.qZA(),n._UZ(16,"img",11),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Q6J("ngModel",t.usuario),n.xp6(1),n.Q6J("ngModel",t.contrasenia),n.xp6(8),n.Q6J("ngIf",t.fallo))},directives:[a._Y,a.JL,a.F,a.Fj,a.Q7,a.JJ,a.On,d.yS,u.O5],styles:['@import"https://fonts.googleapis.com/css?family=Poppins";body[_ngcontent-%COMP%]{background-image:url(wallpaper.e74d76ea621e8b968d8e.jpg)}body[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;height:100vh}a[_ngcontent-%COMP%]{color:#92badd;display:inline-block;text-decoration:none;font-weight:400;margin-left:10px}h2[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;text-transform:uppercase;display:inline-block;margin:40px 8px 10px;color:#ccc}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;width:100%;min-height:100%;padding:20px}#formContent[_ngcontent-%COMP%]{border-radius:10px;background:#fff;width:90%;max-width:450px;position:relative;padding:0;box-shadow:0 30px 60px #0000004d;text-align:center;margin-top:-20%}#formFooter[_ngcontent-%COMP%]{background-color:#f6f6f6;border-top:1px solid #dce8f1;padding:25px;text-align:center;border-radius:0 0 10px 10px}h2.inactive[_ngcontent-%COMP%]{color:#ccc}h2.active[_ngcontent-%COMP%]{color:#0d0d0d;border-bottom:2px solid #5fbae9}input[type=button][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{background-color:#56baed;border:none;color:#fff;padding:15px 80px;text-align:center;text-decoration:none;display:inline-block;text-transform:uppercase;font-size:13px;box-shadow:0 10px 30px #5fbae966;border-radius:5px;margin:10px;transition:all .3s ease-in-out}input[type=button][_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover, input[type=reset][_ngcontent-%COMP%]:hover{background-color:#39ace7}input[type=button][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:active, input[type=reset][_ngcontent-%COMP%]:active{transform:scale(.95)}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{background-color:#f6f6f6;border:none;color:#0d0d0d;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:5px;width:85%;border:2px solid #f6f6f6;transition:all .5s ease-in-out;border-radius:5px}input[type=text][_ngcontent-%COMP%]:focus{background-color:#fff;border-bottom:2px solid #5fbae9}input[type=text][_ngcontent-%COMP%]:placeholder{color:#ccc}.fadeInDown[_ngcontent-%COMP%]{animation-name:fadeInDown;animation-duration:1s;animation-fill-mode:both}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:none}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{opacity:0;animation:fadeIn ease-in 1;animation-fill-mode:forwards;animation-duration:1s}.fadeIn.first[_ngcontent-%COMP%]{animation-delay:.4s}.fadeIn.second[_ngcontent-%COMP%]{animation-delay:.6s}.fadeIn.third[_ngcontent-%COMP%]{animation-delay:.8s}.fadeIn.fourth[_ngcontent-%COMP%]{animation-delay:1s}.underlineHover[_ngcontent-%COMP%]:after{display:block;left:0;bottom:-10px;width:0;height:2px;background-color:#56baed;content:"";transition:width .2s}.underlineHover[_ngcontent-%COMP%]:hover{color:#0d0d0d}.underlineHover[_ngcontent-%COMP%]:hover:after{width:100%}*[_ngcontent-%COMP%]:focus{outline:none}#icon[_ngcontent-%COMP%]{width:60%}*[_ngcontent-%COMP%]{box-sizing:border-box}.alert[_ngcontent-%COMP%]{padding:20px;background-color:#f44336;color:#fff;margin-bottom:15px;margin-top:4%}.closebtn[_ngcontent-%COMP%]{margin-left:15px;color:#fff;font-weight:bold;float:right;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn[_ngcontent-%COMP%]:hover{color:#000}']}),r})()},{path:"registro",component:(()=>{class r{constructor(e,t,i){this.firestore=e,this.router=t,this.userService=i,this.mail="",this.nombre="",this.contrasenia="",this.fallo=!1}registro(){var e=this;return(0,p.Z)(function*(){if(e.checkInputs())e.fallo=!0;else{for(var t=yield e.getUsers(),i=0,o=0;o<t.length;o++)if(e.mail==t[o].mail){i=1,e.fallo=!0;break}if(0==i){const l=e.firestore.createId();e.firestore.collection("usuarios").doc(l).set({mail:e.mail,nombre:e.nombre,clave:e.contrasenia}),e.login()}else e.fallo=!0}})()}getUsers(){var e=this;return(0,p.Z)(function*(){var i,o=[];return yield e.firestore.collection("usuarios").ref.get().then(f=>f.forEach(g=>{(i=g.data()).id=g.id,o.push(i)})),o})()}checkInputs(){return""==this.mail||""==this.nombre||""==this.contrasenia||this.mail.valueOf().indexOf("@")<0?1:0}succes(e){this.userService.usuario.id=e.id,this.userService.usuario.nombre=e.nombre,this.userService.usuario.clave=e.clave,this.userService.usuario.mail=e.mail;var t=this;setTimeout(function(){t.router.navigateByUrl("salonDeJuegos/home")},2e3)}login(){var e=this;return(0,p.Z)(function*(){for(var t=yield e.getUsers(),i=0,o=0;o<t.length;o++)if(e.mail==t[o].mail&&e.contrasenia==t[o].clave){i=1,e.fallo=!1,e.succes(t[o]),e.log(t[o]);break}0==i&&(e.fallo=!0)})()}log(e){const t=this.firestore.createId();this.firestore.collection("logLogin").doc(t).set({usuario:e.id,fechaHora:new Date})}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)(n.Y36(h.ST),n.Y36(d.F0),n.Y36(_.i))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-registro"]],decls:15,vars:4,consts:[[1,"wrapper","fadeInDown"],["id","formContent"],[1,"active"],["type","text","id","email","name","loginUs","placeholder","Mail","required","",1,"fadeIn","second",3,"ngModel","ngModelChange"],["type","text","id","nombre","name","loginPas","placeholder","Usuario","required","",1,"fadeIn","third",3,"ngModel","ngModelChange"],["type","text","id","contras","name","loginPas","placeholder","Contrase\xf1a","required","",1,"fadeIn","third",3,"ngModel","ngModelChange"],["type","submit","value","Registrarse",1,"fadeIn","fourth",3,"click"],["id","formFooter"],["routerLink","/administracion/login",1,"underlineHover"],["class","alert",4,"ngIf"],[1,"alert"],["onclick","this.parentElement.style.display='none';",1,"closebtn",3,"click"]],template:function(e,t){1&e&&(n.TgZ(0,"body"),n.TgZ(1,"div",0),n.TgZ(2,"div",1),n.TgZ(3,"h2",2),n._uU(4," Registro de usuario "),n.qZA(),n.TgZ(5,"form"),n.TgZ(6,"input",3),n.NdJ("ngModelChange",function(o){return t.mail=o}),n.qZA(),n.TgZ(7,"input",4),n.NdJ("ngModelChange",function(o){return t.nombre=o}),n.qZA(),n.TgZ(8,"input",5),n.NdJ("ngModelChange",function(o){return t.contrasenia=o}),n.qZA(),n.TgZ(9,"input",6),n.NdJ("click",function(){return t.registro()}),n.qZA(),n.qZA(),n.TgZ(10,"div",7),n.TgZ(11,"a",8),n._uU(12,"Iniciar sesion"),n.qZA(),n._UZ(13,"div"),n.YNc(14,y,4,0,"div",9),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(6),n.Q6J("ngModel",t.mail),n.xp6(1),n.Q6J("ngModel",t.nombre),n.xp6(1),n.Q6J("ngModel",t.contrasenia),n.xp6(6),n.Q6J("ngIf",t.fallo))},directives:[a._Y,a.JL,a.F,a.Fj,a.Q7,a.JJ,a.On,d.yS,u.O5],styles:['@import"https://fonts.googleapis.com/css?family=Poppins";body[_ngcontent-%COMP%]{background-image:url(wallpaper.e74d76ea621e8b968d8e.jpg)}body[_ngcontent-%COMP%]{font-family:"Poppins",sans-serif;height:100vh}a[_ngcontent-%COMP%]{color:#92badd;display:inline-block;text-decoration:none;font-weight:400;margin-left:10px}h2[_ngcontent-%COMP%]{text-align:center;font-size:16px;font-weight:600;text-transform:uppercase;display:inline-block;margin:40px 8px 10px;color:#ccc}.wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;justify-content:center;width:100%;min-height:100%;padding:20px}#formContent[_ngcontent-%COMP%]{border-radius:10px;background:#fff;width:90%;max-width:450px;position:relative;padding:0;box-shadow:0 30px 60px #0000004d;text-align:center;margin-top:-20%}#formFooter[_ngcontent-%COMP%]{background-color:#f6f6f6;border-top:1px solid #dce8f1;padding:25px;text-align:center;border-radius:0 0 10px 10px}h2.inactive[_ngcontent-%COMP%]{color:#ccc}h2.active[_ngcontent-%COMP%]{color:#0d0d0d;border-bottom:2px solid #5fbae9}input[type=button][_ngcontent-%COMP%], input[type=submit][_ngcontent-%COMP%], input[type=reset][_ngcontent-%COMP%]{background-color:#56baed;border:none;color:#fff;padding:15px 80px;text-align:center;text-decoration:none;display:inline-block;text-transform:uppercase;font-size:13px;box-shadow:0 10px 30px #5fbae966;border-radius:5px;margin:10px;transition:all .3s ease-in-out}input[type=button][_ngcontent-%COMP%]:hover, input[type=submit][_ngcontent-%COMP%]:hover, input[type=reset][_ngcontent-%COMP%]:hover{background-color:#39ace7}input[type=button][_ngcontent-%COMP%]:active, input[type=submit][_ngcontent-%COMP%]:active, input[type=reset][_ngcontent-%COMP%]:active{transform:scale(.95)}input[type=text][_ngcontent-%COMP%]{background-color:#f6f6f6;border:none;color:#0d0d0d;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:5px;width:85%;border:2px solid #f6f6f6;transition:all .5s ease-in-out;border-radius:5px}input[type=text][_ngcontent-%COMP%]:focus{background-color:#fff;border-bottom:2px solid #5fbae9}input[type=text][_ngcontent-%COMP%]:placeholder{color:#ccc}.fadeInDown[_ngcontent-%COMP%]{animation-name:fadeInDown;animation-duration:1s;animation-fill-mode:both}@keyframes fadeInDown{0%{opacity:0;transform:translateY(-100%)}to{opacity:1;transform:none}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.fadeIn[_ngcontent-%COMP%]{opacity:0;animation:fadeIn ease-in 1;animation-fill-mode:forwards;animation-duration:1s}.fadeIn.first[_ngcontent-%COMP%]{animation-delay:.4s}.fadeIn.second[_ngcontent-%COMP%]{animation-delay:.6s}.fadeIn.third[_ngcontent-%COMP%]{animation-delay:.8s}.fadeIn.fourth[_ngcontent-%COMP%]{animation-delay:1s}.underlineHover[_ngcontent-%COMP%]:after{display:block;left:0;bottom:-10px;width:0;height:2px;background-color:#56baed;content:"";transition:width .2s}.underlineHover[_ngcontent-%COMP%]:hover{color:#0d0d0d}.underlineHover[_ngcontent-%COMP%]:hover:after{width:100%}*[_ngcontent-%COMP%]:focus{outline:none}#icon[_ngcontent-%COMP%]{width:60%}*[_ngcontent-%COMP%]{box-sizing:border-box}.alert[_ngcontent-%COMP%]{padding:20px;background-color:#f44336;color:#fff;margin-bottom:15px;margin-top:4%}.closebtn[_ngcontent-%COMP%]{margin-left:15px;color:#fff;font-weight:bold;float:right;font-size:22px;line-height:20px;cursor:pointer;transition:.3s}.closebtn[_ngcontent-%COMP%]:hover{color:#000}']}),r})()}];let O=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[d.Bz.forChild(M)],d.Bz]}),r})(),P=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({imports:[[u.ez,O]]}),r})()}}]);